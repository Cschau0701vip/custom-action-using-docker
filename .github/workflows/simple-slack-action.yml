name: Send message of release on Slack

on:
  push:
    branches: [main]
    
jobs:
  my-slack-job:
    runs-on: ubuntu-latest
    steps:
      - uses: homeday-de/slack-release-bot-action@main    #marketplace
        with:
          webhook_url: ${{ secrets.SLACK_WEBHOOK_URL }}
          title: ðŸš€ v1.0.0
          body: This major release means that we are live!
          context: Slack release BOT
      
      - name: checkout repo
        uses: actions/checkout@v3

      - name: setup node.js
        uses: actions/setup-node@v3
        with:
          cache: 'npm'

      - name: install dependencies
        run: |
          npm ci
      - name: Build action
        run: |
          npm run release
          
      - uses: ./     #custom local
        with:
          webhook_url: ${{ secrets.SLACK_WEBHOOK_URL }}
          body: Hello from local action!
